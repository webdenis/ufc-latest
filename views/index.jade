extends layout

block content
	div.heading
		h1=title
		h3
			a(onclick="toggleSettings()") Settings
		div.settings.hide
			span Autoload fighter records for one next event
			input#autoloadNextEventRecords(type='checkbox',checked=false,onclick="toggleSetting('autoloadNextEventRecords')")
			br
			span Autoload fighter records for all next events
			input#autoloadNextEventRecordsAll(type='checkbox',checked=false,onclick="toggleSetting('autoloadNextEventRecordsAll')")
			br
			span Number of next events to load (1-10)
			input#nextEventsNumber(type='text',oninput="changeSetting('nextEventsNumber', this.value)")
	h2 Latest event
	div(id="#{latestFightContent.date.replace(/ /g,'')}",class="pastEventDiv")
		p.donthide.paddedT
			span.donthide
				=latestFightContent.date
				|  - 
				b=latestFightContent.name
				| 
				a(href="#{latestFightContent.link}")
					sup 
						small.wiki (Wikipedia)
			span.showAll(onclick="showResults(this)") [Show results]
			span.showAll(onclick="loadRecords(this, '#{latestFightContent.date.replace(/ /g,'')}')") [Load fighters records]
			span.hidePast.showAll.donthide(onclick="hidePast(this, '#{latestFightContent.date.replace(/ /g,'')}')") [Hide]
		div.padded
			table#pastEvent.hideResults
				each value in latestFightContent.fights
					tr
						- if (typeof(value) === 'string') {
							- if (!value.includes('Winner')) {
								th(colspan=3)
									b=value
							- } else {
								td(colspan=3,class='fightResult')
									=value
							- }
						- } else {
						each val in value
							- if (typeof(val) === 'string') {
								td #{val}
							- } else if (typeof(val) === 'object' && val[1]) {
								td 
									a(href="#{val[1]}",target="_blank") #{val[0]} 
									sup
										a(class="getRecord",onclick="getRecord('#{val[1].replace('https://en.wikipedia.org/wiki/','')}', this)")
											| [?]
							- } else {
								td #{val[0]}
							- }
						- }
	h2 Upcoming events
	each event in nextFightContent
		div(id="#{event.date.replace(/ /g,'')}",class="newEventDiv")
			p.paddedT
				=event.date
				|  - 
				b=event.name
				| 
				a(href="#{event.link}")
					sup 
						small.wiki (Wikipedia)
				span.showAll(onclick="loadRecords(this, '#{event.date.replace(/ /g,'')}')") [Load fighters records]
			div.padded
				table
					each eventvalue in event.fights
						tr
							- if (typeof(eventvalue) === 'string') {
							th(colspan=3)
								b=eventvalue
							- } else {
							each eventval in eventvalue
								- if (typeof(eventval) === 'string') {
									td #{eventval}
								- } else if (typeof(eventval) === 'object' && eventval[1]) {
									td 
										a(href="#{eventval[1]}",target="_blank") #{eventval[0]} 
										sup
											a(class="getRecord",onclick="getRecord('#{eventval[1].replace('https://en.wikipedia.org/wiki/','')}', this)")
												| [?]
								- } else {
									td #{eventval[0]}
								- }
							- }
					- if (event.announced && event.announced.length > 0) {
						th(colspan=3)
							i Announced bouts
					- }
					each bout in event.announced
						tr
							td
								=bout[0]
							td
								- if (typeof(bout[1]) === 'object' && bout[1][1]) {
									a(href="#{bout[1][1]}",target="_blank") #{bout[1][0]} 
									sup
										a(class="getRecord",onclick="getRecord('#{bout[1][1].replace('https://en.wikipedia.org/wiki/','')}', this)")
											| [?]
								- } else {
									=bout[1][0]
								- }
							td
								- if (typeof(bout[2]) === 'object' && bout[2][1]) {
									a(href="#{bout[2][1]}",target="_blank") #{bout[2][0]} 
									sup
										a(class="getRecord",onclick="getRecord('#{bout[2][1].replace('https://en.wikipedia.org/wiki/','')}', this)")
											| [?]
								- } else {
									=bout[2][0]
								- }